pico-8 cartridge // http://www.pico-8.com
version 39
__lua__
-- converts a number to a hex
-- string.
-- source: https://www.lexaloffle.com/bbs/?tid=30910
-- by: felice
function num2hex(v) 
    local s,l,r=tostr(v,true),3,11
    while sub(s,l,l)=="0" do l+=1 end
    while sub(s,r,r)=="0" do r-=1 end
    return sub(s,min(l,6),flr(v)==v and 6 or max(r,8))
end
 
cls()

print("processing sprite sheet...\n\n")

local cur_color=sget(0,0)
local cur_count=0
local result=""

for y=0,32 do
    for x=0,127 do
        local next_color=sget(x,y)
        if next_color==cur_color 
            and cur_count<15 then
            -- same color
            cur_count+=1
        else
            --write to buffer
            result=result..num2hex(cur_count)
            --todo: hex
            result=result..num2hex(cur_color)
            --reset
            cur_color=next_color
            cur_count=1
        end
    end
end

printh("\""..result.."\"", '@clip')

print("done!\n\nresult copied to clipboard.\npaste into game cart.")
__gfx__
11111111111111111111111711111111111111111111111111117111111117111111111111111111111111111111111111111111111111111111111111111111
11111711111111171111111111111111711111111117111111111111b111111b11111111111111111111111111111111111111111111ccc111c1111111111111
11111b1111171111111b111111171b111111b111111111111b111111b171311b11111111111111111111111111111111111111111ccc111ccc11111111111111
1711bbb111111111111b111111111bb11311b117b11111171b11311bbb1131bb111111111111111111ccc111ccc1111111111111111111111111111111111111
1113bbb111111b1131bbb31b1311bbb1131bbb31b1113111bb1131bbbb1333bb1111111111111111cc111ccc111c111111111111111111111111111111111111
11133bb133111b1331bb33bb331bbbb133bbbb33bb13311bbb1333bbbb333bbb1111111111111111111111111111111111111111111111111111111111111111
11333bbb3311bb133bbb33bb331bbbbb333bb33bbb3333bbbbb3333bb333bbbb1111111111111111111111111111111111111111111111111111111111111111
7b333bb3333bbb133bbb3bbbb33bbbb3333bb33bbbb333bbbb33333bb33bbbbb1111111111111111111111111111111111111111111111111111111111111111
1b3333b3b33bbb333bb33bbbb33bbbb3333333bbbbbb333bb333333333bbbbbb1111111111111111111111111111111111111111111111111111111111111111
bb333333bb33b3333333bbbbb333bb3333333bbbbbbbb333333333333333bbbb1111111111111111111111111111111111111111111111111111111111111111
b3333333bb33b333333bbbbbbb33bbb3333333bbbbbb33333333333333bbbbbb1111111111111111111111111111111111111111111111111111111111111111
3333333bbbb33333333bbbbbbb33bb3333333bbbbbbbb333333333333bbbbbbb1111111111111111111111111111111111111111111111111111111111111111
333333bbbbb33333333bbbbbbbb3333333333bbbbbbbbb3333333333bbbbbbbb1111111111111111111111111111111111111111111111111111111111111111
33333bbbbbb333333bbbbbbbbbb333333333bbbbbbbbbbb33333333333bbbbbb1111111111111111111111111111111111111111111111111111111111111111
33333bbbbbbb333333bbbbbbbbbb333333bbbbbbbbbbb33333333333bbbbbbbb1111111111111111111111111111111111111111111111111111111111111111
333333bbbbbbb333333bbbbbbbb333333333bbbbbbbbbb333333333bbbbbbbbb1111111111111111111111111111111111111111111111111111111111111111
3333bbbbbbbbbb333bbbbbbbbbbbb333333bbbbbbbbbbbb3333333bbbbbbbbbb1111111111111111111111111111111111111111111111111111111111111111
33bbbbbbbbbbbb33bbbbbbbbbbbbbb333bbbbbbbbbbbbbbbb333333bbbbbbbbb11c111cc111c1111111111111111111111111111111111111111111111111111
3333bbbbbbbbb3333bbbbbbbbbbbbbbb4ff44fff44ffff33333333bbbbbbbbbb111ccc11ccc11111111111111111111111111111111111111111111111111111
333bbbbbbbbbbb3bbbbbbbbbbbbbbbbb4fffffff44ffffff44f44bbbbbbbbbbb1111111111111111111111111111111111111111111111111111111111111111
bbbbbbbbbbbbbbbbbbbbbbb44ffffff44ffff4fffffffffffff44ffffffff4441111111111111111111111111111111111111111111111111111111111111111
fbbbbbbbbbbbbbbbffff44f44ffbffffffffffffffffbfffffffffffbffff4441111111111111111111111111111111111111111111111111111111111111111
f4bbbbbbbbbbff44ffbffff44fbffff4ffbffffffffffb4fffbfffffbfff4fff111111111111111111222222222222222222222222111111111c11111111c111
f44fff44ffffff44ffbbfffffffffbffffffff55ffffffffbbbffffff4fffbff1111111111111111112240444444444444444444442111111111cc1111cc1c11
ffffff44fff4fbfbfffffffffffbf44f4fffbffff4fffffffbff4fffffffffbf111111111111111111242444444444444444444444021111111111cccc1111cc
ffff55fffbffbbbbfff4fffffffbf4444fffbffffffbbffffbffffffffbbffff1111111111111111112422222222222222222222222221111111111111111111
f4fbfffbfbbffbbfff4ffff55fffff444fffffffbfbbfffffffffbff4fbfffff1111111111111111112421240444444444444444444442111111111111111111
ffbfffffbbbbfbfffffff4f55ffffff444fff4fffbbfffffffffbbbffffff4ff1111111111111111112421124444444444444444444404211111111111111111
ffff4bffffffffff4bbffffffffccccc444fffffffff4fffffffbbfff5ffffff1111111111111111112421122222222222222222222222221111111111111111
4fffffbff4fffffffbfffffccccc1111c44fffffffffffffcccccccfffffffff11111111111111111c242c124244444444444444444444402111111111111111
fffffccccccccccccfccccc1111111111ccccccccccffcccc111111ccccccccf111111111111111111ccc1124224044444444444444444444211111111111111
ffccc11111111111ccc11111111111111111111111ccc111111111111111111c1111111111111111111111124212222222222222222222222221111111111111